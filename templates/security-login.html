{% extends 'base.html' %}

<!-------------------------- block head -------------------------------->
{% block head %}
<title>Typing Habits Login Page</title>
{% endblock %}

<!-------------------------- block head -------------------------------->

<!-------------------------- block navlink ------------------------------>
{% block navlinks %}
<li class="nav-item">
  <a class="nav-link" href="{{ url_for('register') }}">Register</a>
</li>
{% endblock %}
<!---------------------------- block navlink --------------------------->

{% block body %}
<!------------------------- Banner section ------------------------->
<section id="banner">
    <div class="container">
        <div class="row">
            <div class="col-md-6 form-box" style="padding:3%;text-align:center;margin-left:auto;margin-right:auto">       
                <h2>Log into your account</h2>
                <br />
                <div class="tab" id="login_pt_one">
                    <form id="form" method="post">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                        
                        <label>Your security question:</label>
                        <br/>
                        <p>
                            {{ security_qn }}
                        </p>
                        <label>Your Answer:</label>
                        <br/>
                        <textarea name="security-ans" rows="3" cols="60"
                                placeholder="Please type your answer here. (Sensitive to caps and punctuation if you have)"></textarea>
                        
                        <br/>
                        {% if error %}
                        <div style="padding:2%"class="alert alert-danger alert-dismissible">
                            <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a> 
                            <strong>{{error}}</strong>
                        </div>
                        {% endif %}
                        <input type="submit" value="Log In" class="btn btn-info"/>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    var csrf_token = "{{ csrf_token() }}";
    $.ajaxSetup({
        beforeSend: function(xhr, settings) {
            if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {
                xhr.setRequestHeader("X-CSRFToken", csrf_token);
            }
        }
    });
</script>
<!------------------------- Banner section ------------------------->
{% endblock %}